---
// Docs page

import { CollectionEntry, getCollection } from "astro:content";
import DocsArticle from "../layouts/DocsArticle.astro";

export async function getStaticPaths() {
	const articles = await getCollection("docs");
	return articles.map((article) => {
		if (article.slug.match(/\/\d/g)) {
			throw new Error(
				`provide a custom slug for "${article.id}" which doesn't contain numbers`,
			);
		}

		return {
			params: { slug: article.slug },
			props: article,
		};
	});
}

type Props = CollectionEntry<"docs">;

const article = Astro.props;
const { Content } = await article.render();
---

<DocsArticle title={article.data.title} id={article.id}>
	<Content />
</DocsArticle>
